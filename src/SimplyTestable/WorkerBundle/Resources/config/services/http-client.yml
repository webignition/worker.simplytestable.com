services:
  GuzzleHttp\Cookie\CookieJarInterface:
    class: GuzzleHttp\Cookie\CookieJar

  webignition\Guzzle\Middleware\HttpAuthentication\HttpAuthenticationMiddleware:

  webignition\Guzzle\Middleware\RequestHeaders\RequestHeadersMiddleware:

  GuzzleHttp\HandlerStack:
    factory: 'SimplyTestable\WorkerBundle\Services\HttpHandlerStackFactory:create'

  Kevinrob\GuzzleCache\CacheMiddleware:
    factory: 'SimplyTestable\WorkerBundle\Services\HttpCacheMiddlewareFactory:create'

  webignition\HttpHistoryContainer\Container:

  SimplyTestable\WorkerBundle\Services\HttpClientService:
    arguments:
      - '%curl_options%'
      - '@GuzzleHttp\HandlerStack'
      - '@GuzzleHttp\Cookie\CookieJarInterface'
      - '@SimplyTestable\WorkerBundle\Services\HttpRetryMiddleware'

  GuzzleHttp\Client:
    factory: 'SimplyTestable\WorkerBundle\Services\HttpClientService:getHttpClient'
